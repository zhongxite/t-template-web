import{T as O,_ as A,i as j,s as W,j as X,f as s,r as N,o as z,g as G,a as f,b as u,u as a,k as i,w,F as H,U as J,V as K,m as F,v as y,p as M,e as Q,l as Y,x as T}from"./index-8906f66a.js";import{a as Z}from"./user-b4b83a6b.js";import{e as $}from"./common-fd5caf10.js";const ee=n=>O({url:"/api/common/exportFile",method:"get",params:n,responseType:"blob"});const te=n=>(M("data-v-99a83ace"),n=n(),Q(),n),le={class:"mainBox"},ae=te(()=>f("div",{class:"el-upload__text"},[Y(" 拖拽文件到此处或者"),f("em",null,"点击上传"),f("br"),f("span",{style:{display:"block","margin-top":"10px"}},"仅支持xlsx文件格式")],-1)),oe={__name:"index",setup(n){const V=j();let{isShowLoadingBox:d}=W(X());const S=F(()=>T(()=>import("./index-c2ba8daf.js"),["assets/index-c2ba8daf.js","assets/index-8906f66a.js","assets/index-09d74362.css","assets/index-3b6c3937.css"])),k=F(()=>T(()=>import("./index-39eafc3f.js"),["assets/index-39eafc3f.js","assets/index-8906f66a.js","assets/index-09d74362.css","assets/common-fd5caf10.js","assets/index-05f08c60.css"])),P=F(()=>T(()=>import("./index-4c6e7f52.js"),["assets/index-4c6e7f52.js","assets/index-8906f66a.js","assets/index-09d74362.css","assets/index-97b37711.css"]));let o=s({pageNum:1,page:10});const _=s([{type:"input",label:"姓名",prop:"name",placeholder:"请输入名称",defaultData:""},{type:"select",label:"性别",prop:"sex",placeholder:"请选择性别",defaultData:"",option:[{label:"男",value:1},{label:"女",value:2},{label:"未知",value:0}]},{type:"daterange",label:"时间选择",prop:"date",branchValue:{start:"startTime",end:"endTime"}}]),L=s({left:[{name:"创建",type:"",color:"#626aef",listeners:{click:()=>{let l="view/demo/index";V.addRoute("redirectName",{name:"demo",path:"/demo",meta:{title:"demo"},component:modules[`/src/${l}.vue`]})}}},{name:"导入",type:"",color:"#626aef",listeners:{click:()=>{r.value=!0}}},{name:"导出",type:"",color:"#626aef",listeners:{click:()=>{d.value=!0,ee({exportName:"user",...o.value}).then(l=>{$(l,"用户列表")})}}}],right:[{name:"刷新",type:"info",listeners:{click:()=>{m()}}}]});let r=s(!1),v=s("500"),b=s("导入数据"),x=s([]);const B=l=>{r.value=!1,d.value=!0;const t=l.name.substring(l.name.lastIndexOf(".")+1);if(["xlsx"].indexOf(t)===-1)return y({message:"上传文件只能是xlsx格式",type:"error"}),d.value=!1,!1},E=l=>{l.code==200?y({message:l.msg,type:"success"}):y({message:l.msg,type:"error"}),d.value=!1,m()},q=l=>{y({message:"导入失败",type:"error"}),d.value=!1},m=()=>{p.value=!0,Z({...o.value}).then(l=>{l.code==200&&(c.value=l.data.list,g.value=l.data.total,J(),p.value=!1)})},C=(l,t)=>{o.value={...o.value,...l},console.log("数据改变时===>",o.value),t=="search"&&m()},U=s([{type:"selection",width:55},{type:"text",label:"姓名",prop:"name",width:100},{type:"img",label:"头像",prop:"avatar",width:100,previewListName:""},{type:"tag",label:"手机号码",prop:"phone",width:100},{type:"text",label:"邮箱",prop:"email",width:200},{type:"btn",label:"操作",list:l=>[{name:"创建",type:"",color:"#626aef",show:!0,listeners:{click:()=>{console.log("点击事件获取当前子项数据===>",l)}}},{name:"创建",type:"",color:"#626aef",show:l.tag!="3",listeners:{click:()=>{console.log("点击事件获取当前子项数据===>",l)}}}]}]);let c=s([]),p=s(!1);const I=l=>{console.log("选择状态的数据===>",l)};let g=s(0);const D=l=>{o.value.pageNum=l,m(),console.log("分页数据改变时===>",l)};return m(),(l,t)=>{const h=N("el-icon"),R=N("el-upload");return z(),G(H,null,[f("div",le,[u(a(S),{queryFormList:a(_),"onUpdate:queryFormList":t[0]||(t[0]=e=>i(_)?_.value=e:null),queryForm:a(o),"onUpdate:queryForm":t[1]||(t[1]=e=>i(o)?o.value=e:o=e),operateBtnList:a(L),"onUpdate:operateBtnList":t[2]||(t[2]=e=>i(L)?L.value=e:null),onClickSearch:C},null,8,["queryFormList","queryForm","operateBtnList"]),u(a(k),{modelValue:a(U),"onUpdate:modelValue":t[3]||(t[3]=e=>i(U)?U.value=e:null),tableList:a(c),"onUpdate:tableList":t[4]||(t[4]=e=>i(c)?c.value=e:c=e),tablePage:a(o).page,"onUpdate:tablePage":t[5]||(t[5]=e=>a(o).page=e),tablePageNum:a(o).pageNum,"onUpdate:tablePageNum":t[6]||(t[6]=e=>a(o).pageNum=e),tableTotal:a(g),"onUpdate:tableTotal":t[7]||(t[7]=e=>i(g)?g.value=e:g=e),loading:a(p),"onUpdate:loading":t[8]||(t[8]=e=>i(p)?p.value=e:p=e),onTablePageChange:D,onSelectionChangeStatus:I},null,8,["modelValue","tableList","tablePage","tablePageNum","tableTotal","loading"])]),u(a(P),{modelValue:a(r),"onUpdate:modelValue":t[10]||(t[10]=e=>i(r)?r.value=e:r=e),width:a(v),"onUpdate:width":t[11]||(t[11]=e=>i(v)?v.value=e:v=e),title:a(b),"onUpdate:title":t[12]||(t[12]=e=>i(b)?b.value=e:b=e)},{default:w(()=>[u(R,{"file-list":a(x),"onUpdate:fileList":t[9]||(t[9]=e=>i(x)?x.value=e:x=e),action:"http://localhost/api/common/importFile",multiple:"",drag:"","before-upload":B,"show-file-list":!1,accept:".xlsx","on-success":E,"on-error":q},{default:w(()=>[u(h,{class:"el-icon--upload"},{default:w(()=>[u(a(K))]),_:1}),ae]),_:1},8,["file-list"])]),_:1},8,["modelValue","width","title"])],64)}}},re=A(oe,[["__scopeId","data-v-99a83ace"]]);export{re as default};
