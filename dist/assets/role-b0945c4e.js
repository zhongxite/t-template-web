import{_ as J,f as o,D as j,s as q,j as H,r as m,o as C,g as z,a as E,b as n,u as t,k as u,w as r,F as G,q as K,v as Q,c as X,H as Y,C as U,L as $,l as M,t as ee,m as B,x as S}from"./index-8906f66a.js";import{d as te,g as le,r as ae}from"./role-15182004.js";const oe={class:"mainBox"},se={class:"subBtn"},ne={__name:"role",setup(ie){const D=B(()=>S(()=>import("./index-c2ba8daf.js"),["assets/index-c2ba8daf.js","assets/index-8906f66a.js","assets/index-09d74362.css","assets/index-3b6c3937.css"])),F=B(()=>S(()=>import("./index-39eafc3f.js"),["assets/index-39eafc3f.js","assets/index-8906f66a.js","assets/index-09d74362.css","assets/common-fd5caf10.js","assets/index-05f08c60.css"])),I=B(()=>S(()=>import("./index-4c6e7f52.js"),["assets/index-4c6e7f52.js","assets/index-8906f66a.js","assets/index-09d74362.css","assets/index-97b37711.css"])),L=o({left:[{name:"创建",type:"",color:"#626aef",listeners:{click:()=>{p="创建",s.value={isChange:0},V.value=!1,i.value=!0}}}],right:[{name:"刷新",type:"info",listeners:{click:()=>{h()}}}]}),w=o([{type:"text",label:"名称",prop:"name",width:150,isShowZero:!1},{type:"switch",label:"状态",prop:"status",width:100,isShowZero:!1,isDisabled:!0},{type:"textTime",label:"创建时间",prop:"created",isShowZero:!1,minWidth:140},{type:"textTime",label:"修改时间",prop:"updated",isShowZero:!1,minWidth:140},{type:"btn",label:"操作",width:200,list:a=>[{name:"编辑",type:"",color:"#626aef",show:!0,listeners:{click:()=>{p="编辑",s.value={...a,isChange:1},V.value=!0,i.value=!0}}},{name:"删除",type:"",color:"#e47470",show:!0,listeners:{click:()=>{K.confirm("确定是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{te({id:a.id}).then(e=>{e.code==200&&(Q({message:"删除成功",type:"success"}),h())})}).catch(()=>{})}}}]}]);let c=o([]),v=o(!1),i=o(!1),g=o("500"),p=o("创建"),b=o(!1),s=o({id:"",name:"",status:"",isChange:0,regMenusList:null,menusList:null}),V=o(!1),d=o(!1),f=o(!1);const y=()=>{i.value=!1,d.value=!1,f.value=!1,b.value=!1},N=a=>{let e=[];a.forEach(x=>{x.forEach(_=>{e.push(_)})}),s.value.menusList=String([...new Set(e)])},R=()=>{d.value=!0,ae({...s.value,regMenusList:JSON.stringify(s.value.regMenusList)}).then(a=>{a.code==200?setTimeout(()=>{d.value=!1,f.value=!0,setTimeout(()=>{y(),h()},1e3)},1e3):d.value=!1}).catch(()=>{d.value=!1})};j(i,(a,e)=>{a||y()});let T=o([{id:0,name:"控制台",children:[]}]),{routerList:O}=q(H());const h=()=>{le().then(a=>{a.code==200&&(T.value[0].children=O.value,a.data.forEach(e=>{e.regMenusList=JSON.parse(e.regMenusList)}),c.value=a.data)})};return h(),(a,e)=>{const x=m("el-input"),_=m("el-form-item"),A=m("el-cascader"),P=m("el-switch"),Z=m("el-form"),W=m("el-scrollbar"),k=m("el-button");return C(),z(G,null,[E("div",oe,[n(t(D),{operateBtnList:t(L),"onUpdate:operateBtnList":e[0]||(e[0]=l=>u(L)?L.value=l:null)},null,8,["operateBtnList"]),n(t(F),{modelValue:t(w),"onUpdate:modelValue":e[1]||(e[1]=l=>u(w)?w.value=l:null),tableList:t(c),"onUpdate:tableList":e[2]||(e[2]=l=>u(c)?c.value=l:c=l),loading:t(v),"onUpdate:loading":e[3]||(e[3]=l=>u(v)?v.value=l:v=l)},null,8,["modelValue","tableList","loading"])]),n(t(I),{modelValue:t(i),"onUpdate:modelValue":e[7]||(e[7]=l=>u(i)?i.value=l:i=l),width:t(g),"onUpdate:width":e[8]||(e[8]=l=>u(g)?g.value=l:g=l),title:t(p),"onUpdate:title":e[9]||(e[9]=l=>u(p)?p.value=l:p=l),onClick:e[10]||(e[10]=l=>u(b)?b.value=!1:b=!1)},{default:r(()=>[n(W,null,{default:r(()=>[n(Z,{ref:"form",model:t(s),"label-width":"auto",class:"userBox"},{default:r(()=>[n(_,{label:"名称",prop:"name",class:"formItem"},{default:r(()=>[n(x,{modelValue:t(s).name,"onUpdate:modelValue":e[4]||(e[4]=l=>t(s).name=l),type:"text","show-word-limit":"",clearable:"",placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),t(i)?(C(),X(_,{key:0,label:"路由列表",prop:"regMenusList",class:"formItem"},{default:r(()=>[n(A,{width:"100%",modelValue:t(s).regMenusList,"onUpdate:modelValue":e[5]||(e[5]=l=>t(s).regMenusList=l),options:t(T),props:{multiple:!0,value:"id",label:"name"},clearable:"",placeholder:"点击选择",onChange:N},null,8,["modelValue","options"])]),_:1})):Y("",!0),n(_,{label:"是否启动",prop:"status",class:"formItem"},{default:r(()=>[n(P,{modelValue:t(s).status,"onUpdate:modelValue":e[6]||(e[6]=l=>t(s).status=l),"inline-prompt":"","active-icon":t(U),"inactive-icon":t($),"active-value":1,"inactive-value":0},null,8,["modelValue","active-icon","inactive-icon"])]),_:1})]),_:1},8,["model"])]),_:1}),E("div",se,[n(k,{class:"btn",icon:t(f)?t(U):"",type:"success",loading:t(d),onClick:R},{default:r(()=>[M(ee(!t(d)&&!t(f)?"确认":t(f)?t(V)?"修改成功":"创建成功":"正在提交"),1)]),_:1},8,["icon","loading"]),n(k,{class:"btn",onClick:y},{default:r(()=>[M("取消")]),_:1})])]),_:1},8,["modelValue","width","title"])],64)}}},de=J(ne,[["__scopeId","data-v-19f7bb27"]]);export{de as default};
